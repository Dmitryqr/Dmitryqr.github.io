<!DOCTYPE html>
<html>
<head>
    <title>AeroScout Dashboard</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-success {
            background: #27ae60;
        }

        .btn-warning {
            background: #f39c12;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .mission-item, .defect-item {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            border-left: 5px solid #3498db;
            transition: all 0.3s ease;
        }

        .mission-item:hover, .defect-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .defect-crack {
            border-left-color: #e74c3c;
            background: #ffe6e6;
        }

        .defect-rust {
            border-left-color: #e67e22;
            background: #fff3e6;
        }

        .mission-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .mission-id {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .mission-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .status-active {
            background: #d1ecf1;
            color: #0c5460;
        }

        .defect-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .defect-type {
            font-weight: bold;
            font-size: 1.1em;
        }

        .defect-confidence {
            font-weight: bold;
        }

        .confidence-high { color: #e74c3c; }
        .confidence-medium { color: #e67e22; }
        .confidence-low { color: #f39c12; }

        .map-container {
            height: 300px;
            background: #e9ecef;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 1.1em;
        }

        .live-feed {
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 5px;
        }

        .log-info { background: rgba(52, 152, 219, 0.3); }
        .log-warning { background: rgba(243, 156, 18, 0.3); }
        .log-error { background: rgba(231, 76, 60, 0.3); }

        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        .error {
            background: #e74c3c;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .drone-animation {
            text-align: center;
            font-size: 3em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÅ AeroScout Dashboard</h1>
            <p class="subtitle">–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</p>
            
            <div class="controls">
                <button class="btn btn-success" onclick="startMission()">
                    üöÄ –ó–∞–ø—É—Å–∫ –º–∏—Å—Å–∏–∏
                </button>
                <button class="btn btn-warning" onclick="emergencyStop()">
                    ‚ö†Ô∏è –ê–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
                </button>
                <button class="btn" onclick="refreshData()">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                </button>
                <button class="btn" onclick="toggleLiveFeed()">
                    üì° –ü—Ä—è–º–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è
                </button>
            </div>
        </header>

        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <span class="stat-number" id="totalMissions">0</span>
                <span class="stat-label">–í—Å–µ–≥–æ –º–∏—Å—Å–∏–π</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="totalDefects">0</span>
                <span class="stat-label">–ù–∞–π–¥–µ–Ω–æ –¥–µ—Ñ–µ–∫—Ç–æ–≤</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="flightHours">0</span>
                <span class="stat-label">–ß–∞—Å–æ–≤ –ø–æ–ª—ë—Ç–∞</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="crackCount">0</span>
                <span class="stat-label">–¢—Ä–µ—â–∏–Ω –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="rustCount">0</span>
                <span class="stat-label">–£—á–∞—Å—Ç–∫–æ–≤ —Ä–∂–∞–≤—á–∏–Ω—ã</span>
            </div>
        </div>

        <div class="dashboard">
            <div class="panel">
                <h2>üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∏—Å—Å–∏–∏</h2>
                <div id="missionsList">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –º–∏—Å—Å–∏–π...</div>
                </div>
            </div>

            <div class="panel">
                <h2>üîç –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç—ã</h2>
                <div id="defectsList">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ñ–µ–∫—Ç–æ–≤...</div>
                </div>
            </div>

            <div class="panel">
                <h2>üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ø–æ–ª—ë—Ç–æ–≤</h2>
                <div class="map-container">
                    üó∫Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–ª—ë—Ç–æ–≤
                    <br><small>(–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ Google Maps API)</small>
                </div>
            </div>

            <div class="panel">
                <h2>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
                <div class="live-feed" id="liveFeed" style="display: none;">
                    <div class="log-entry log-info">üü¢ –°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞</div>
                    <div class="log-entry log-info">üì° –ü–æ–∏—Å–∫ –¥—Ä–æ–Ω–æ–≤...</div>
                    <div class="log-entry log-warning">‚ö†Ô∏è –ù–∏–∑–∫–∏–π –∑–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏: 23%</div>
                </div>
                <div id="analyticsPlaceholder">
                    <div class="drone-animation">üöÅ</div>
                    <p style="text-align: center;">–ì–æ—Ç–æ–≤ –∫ –ø—Ä–∏—ë–º—É —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // üìä –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const appState = {
            missions: [],
            defects: [],
            stats: {},
            liveFeedActive: false,
            refreshInterval: null
        };

        // üéØ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const mockData = {
            stats: {
                total_missions: 15,
                total_defects: 47,
                total_flight_hours: 8.5,
                defects_by_type: {
                    crack: 28,
                    rust: 19
                }
            },
            missions: [
                {
                    id: "mission_001",
                    drone_id: "pioneer_001",
                    location: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ ‚Ññ1",
                    total_images: 45,
                    defects_found: 3,
                    flight_duration: 1250,
                    status: "completed",
                    created_at: new Date().toISOString()
                },
                {
                    id: "mission_002", 
                    drone_id: "pioneer_001",
                    location: "–ú–æ—Å—Ç —á–µ—Ä–µ–∑ —Ä–µ–∫—É",
                    total_images: 67,
                    defects_found: 7,
                    flight_duration: 1850,
                    status: "active",
                    created_at: new Date(Date.now() - 300000).toISOString()
                }
            ],
            defects: [
                {
                    id: "defect_001",
                    type: "crack",
                    confidence: 0.87,
                    location: "55.7558, 37.6173",
                    mission_id: "mission_001",
                    timestamp: new Date().toISOString()
                },
                {
                    id: "defect_002",
                    type: "rust", 
                    confidence: 0.92,
                    location: "55.7559, 37.6174",
                    mission_id: "mission_001",
                    timestamp: new Date().toISOString()
                },
                {
                    id: "defect_003",
                    type: "crack",
                    confidence: 0.78,
                    location: "55.7560, 37.6175", 
                    mission_id: "mission_002",
                    timestamp: new Date().toISOString()
                }
            ]
        };

        // üöÄ –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        function startMission() {
            addLog("üöÄ –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–π –º–∏—Å—Å–∏–∏...", "info");
            showNotification("–ú–∏—Å—Å–∏—è –∑–∞–ø—É—â–µ–Ω–∞!", "success");
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞
            setTimeout(() => {
                addLog("‚úÖ –ú–∏—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞", "info");
                refreshData();
            }, 2000);
        }

        function emergencyStop() {
            addLog("üõë –ê–í–ê–†–ò–ô–ù–ê–Ø –û–°–¢–ê–ù–û–í–ö–ê!", "error");
            showNotification("–ê–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!", "error");
        }

        function refreshData() {
            addLog("üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...", "info");
            loadData();
        }

        function toggleLiveFeed() {
            appState.liveFeedActive = !appState.liveFeedActive;
            const feed = document.getElementById('liveFeed');
            const analytics = document.getElementById('analyticsPlaceholder');
            
            if (appState.liveFeedActive) {
                feed.style.display = 'block';
                analytics.style.display = 'none';
                addLog("üì° –ü—Ä—è–º–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞", "info");
            } else {
                feed.style.display = 'none';
                analytics.style.display = 'block';
            }
        }

        function addLog(message, type = "info") {
            if (!appState.liveFeedActive) return;
            
            const feed = document.getElementById('liveFeed');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            
            feed.appendChild(logEntry);
            feed.scrollTop = feed.scrollHeight;
        }

        function showNotification(message, type = "info") {
            // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                animation: slideIn 0.3s ease;
                ${type === 'success' ? 'background: #27ae60;' : ''}
                ${type === 'error' ? 'background: #e74c3c;' : ''}
                ${type === 'info' ? 'background: #3498db;' : ''}
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // üìä –§—É–Ω–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
        function renderStats(stats) {
            document.getElementById('totalMissions').textContent = stats.total_missions || 0;
            document.getElementById('totalDefects').textContent = stats.total_defects || 0;
            document.getElementById('flightHours').textContent = stats.total_flight_hours || 0;
            document.getElementById('crackCount').textContent = stats.defects_by_type?.crack || 0;
            document.getElementById('rustCount').textContent = stats.defects_by_type?.rust || 0;
        }

        function renderMissions(missions) {
            const container = document.getElementById('missionsList');
            
            if (!missions || missions.length === 0) {
                container.innerHTML = '<div class="mission-item">–ú–∏—Å—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            container.innerHTML = missions.map(mission => `
                <div class="mission-item">
                    <div class="mission-header">
                        <span class="mission-id">${mission.id}</span>
                        <span class="mission-status status-${mission.status}">
                            ${mission.status === 'active' ? '–ê–ö–¢–ò–í–ù–ê' : '–ó–ê–í–ï–†–®–ï–ù–ê'}
                        </span>
                    </div>
                    <div><strong>–õ–æ–∫–∞—Ü–∏—è:</strong> ${mission.location}</div>
                    <div><strong>–î—Ä–æ–Ω:</strong> ${mission.drone_id}</div>
                    <div><strong>–°–Ω–∏–º–∫–æ–≤:</strong> ${mission.total_images} | <strong>–î–µ—Ñ–µ–∫—Ç–æ–≤:</strong> ${mission.defects_found}</div>
                    <div><strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> ${Math.round(mission.flight_duration/60)} –º–∏–Ω—É—Ç</div>
                </div>
            `).join('');
        }

        function renderDefects(defects) {
            const container = document.getElementById('defectsList');
            
            if (!defects || defects.length === 0) {
                container.innerHTML = '<div class="defect-item">–î–µ—Ñ–µ–∫—Ç—ã –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã</div>';
                return;
            }

            container.innerHTML = defects.map(defect => {
                const confidenceClass = defect.confidence > 0.8 ? 'high' : defect.confidence > 0.6 ? 'medium' : 'low';
                const defectClass = defect.type === 'crack' ? 'defect-crack' : 'defect-rust';
                
                return `
                    <div class="defect-item ${defectClass}">
                        <div class="defect-header">
                            <span class="defect-type">
                                ${defect.type === 'crack' ? 'üîÑ –¢–†–ï–©–ò–ù–ê' : 'üü´ –†–ñ–ê–í–ß–ò–ù–ê'}
                            </span>
                            <span class="defect-confidence confidence-${confidenceClass}">
                                ${(defect.confidence * 100).toFixed(1)}%
                            </span>
                        </div>
                        <div><strong>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</strong> ${defect.location}</div>
                        <div><strong>–ú–∏—Å—Å–∏—è:</strong> ${defect.mission_id}</div>
                        <div><strong>–í—Ä–µ–º—è:</strong> ${new Date(defect.timestamp).toLocaleString()}</div>
                    </div>
                `;
            }).join('');
        }

        // üì° –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        async function loadData() {
            try {
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å API
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                appState.stats = mockData.stats;
                appState.missions = mockData.missions;
                appState.defects = mockData.defects;
                
                renderStats(appState.stats);
                renderMissions(appState.missions);
                renderDefects(appState.defects);
                
                addLog("‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã", "info");
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                addLog("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö", "error");
            }
        }

        // üéØ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üöÄ AeroScout Dashboard –∑–∞–ø—É—â–µ–Ω!");
            loadData();
            
            // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            appState.refreshInterval = setInterval(refreshData, 30000);
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –∂–∏–≤–æ–π —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
            setInterval(() => {
                if (appState.liveFeedActive) {
                    const messages = [
                        "üì° –ü–æ–ª—É—á–µ–Ω–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è —Å –¥—Ä–æ–Ω–∞",
                        "üõ∞Ô∏è GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã", 
                        "üîã –ó–∞—Ä—è–¥ –±–∞—Ç–∞—Ä–µ–∏: 67%",
                        "üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 23¬∞C",
                        "üì∏ –°–¥–µ–ª–∞–Ω–æ 5 —Å–Ω–∏–º–∫–æ–≤"
                    ];
                    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                    addLog(randomMessage, "info");
                }
            }, 5000);
        });

        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
        window.addEventListener('beforeunload', () => {
            if (appState.refreshInterval) {
                clearInterval(appState.refreshInterval);
            }
        });
    </script>
</body>
</html>
